<%= unless is_nil(@metadata) do %>
<% locale = get_session(@conn, :locale) %>
<div>
    <%= if @metadata["start_date"] != nil and @metadata["end_date"] != nil do %>
      <p><%= dgettext("validations", "It is valid from")%> <strong><%= DateTimeDisplay.format_date(@metadata["start_date"], locale) %></strong> <%= dgettext("validations", "to")%> <strong><%= DateTimeDisplay.format_date(@metadata["end_date"], locale) %></strong>.</p>
    <% end %>
    <ul>
    <%= if Map.get(@metadata, "modes", []) != [] do %>
      <li><%= dngettext("validations", "transport mode", "transport modes", length(@metadata["networks"])) %> : <strong><%= Enum.join(@metadata["modes"], ", ") %></strong> </li>
    <% end %>
    <%= if Map.get(@metadata, "networks", []) != [] do %>
      <li>
        <div>
          <div class="networks-list">
            <%= dngettext("validations", "network", "networks", length(@metadata["networks"])) %> : <strong><%= Enum.join(@metadata["networks"], ", ")%></strong>
          </div>
        </div>
      </li>
    <% end %>
    <%= if @metadata["stop_points_count"] != nil do %>
      <li><%= dgettext("validations", "number of stop points")%> : <strong><%= @metadata["stop_points_count"]%></strong></li>
    <% end %>
    <%= if @metadata["stop_areas_count"] != nil do %>
      <li><%= dgettext("validations", "number of stop areas")%> : <strong><%= @metadata["stop_areas_count"]%></strong></li>
    <% end %>

    <% found_tags = DB.Resource.find_tags_from_metadata(@metadata) %>
    <%= for tag <- found_tags do %>
      <span class="label mode"><%= tag %></span>
    <% end %>

    <%= for tag <- DB.Resource.existing_gtfs_tags() -- found_tags do %>
      <span class="label"><%= tag %></span>
    <% end %>

    <%= dgettext("page-dataset-details", "Features available in the resource:") %>
      <div>
    <%= if @metadata["MissingCoordinates"] != nil do %>
        <span class="label">position des stations</span>
    <%= else %>
      <span class="label mode">position des stations</span>
    <% end %>

    <%= if @metadata["has_fares"] == true do %>
        <span class="label">tarifs</span>
    <%= else %>
      <span class="label mode">tarifs</span>
    <% end %>

    <%= if @metadata["has_pathways"] == true do %>
        <span class="label">tracés de lignes</span>
    <%= else %>
      <span class="label mode">tracés de lignes</span>
    <% end %>

 <%= if @metadata["continuous_pickup"] != nil do %>
        <span class="label">transport à la demande</span>
    <%= else %>
      <span class="label mode">transport à la demande</span>
    <% end %>
  <%= @metadata["lines_count"] %>
  <%= @metadata["lines_with_custom_color_count"] %>

 <%= if @metadata["lines_count"] != @metadata["lines_with_custom_color_count"] && @metadata["lines_count"] != 0 do %>
        <span class="label">couleur des lignes</span>
    <%= else %>
      <span class="label mode">couleur des lignes</span>
    <% end %>

    </div>

    </ul>
  </div>
<% end %>
