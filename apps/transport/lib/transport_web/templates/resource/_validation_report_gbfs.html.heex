<div class="panel">
  <p>
    <%= raw(
      dgettext(
        "validations",
        ~s(Validation carried out the %{date} using the <a href="%{validator_url}" target="_blank">MobilityData validator</a>.),
        date:
          DateTimeDisplay.format_datetime_to_paris(@multi_validation.validation_timestamp, get_session(@conn, :locale)),
        validator_url: gbfs_validator_url()
      )
    ) %>
  </p>
  <% nb_errors = errors_count(@multi_validation) %>
  <%= render("_errors_warnings_count.html", nb_errors: nb_errors, nb_warnings: 0) %>
  <% validation_path =
    live_path(@conn, TransportWeb.Live.OnDemandValidationSelectLive,
      type: "gbfs",
      url: @resource.url
    ) %>
  <a class="button" href={validation_path} target="_blank" role="link">
    <i class="icon fa-check" aria-hidden="true"></i>
    <%= dgettext("validations", "Validate this GBFS now") %>
  </a>

  <%= if nb_errors > 0 do %>
    <p>
      <%= raw(
        dgettext(
          "validations",
          ~s(See <a href="%{report_url}" target="_blank">the validation report</a> online.),
          report_url: gbfs_validation_link(@resource)
        )
      ) %>
    </p>

    <%= render("_on_demand_validation_hint.html", conn: @conn, resource: @resource) %>
  <% end %>
</div>
